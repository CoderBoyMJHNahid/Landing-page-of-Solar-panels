/*!
 * @name    : Sweepstake Script
 * @author  : gmo
 * @created : [may/18]
 * @version : 14.00
 * @updated : [Jul/23]
 */
var _wg = _wg || {}
  , _wg_step = _wg_step || null;
$(document).on("show.bs.modal", ".modal", (function() {
    var e = 1040 + 10 * $(".modal:visible").length;
    $(this).css("z-index", e),
    setTimeout((function() {
        $(".modal-backdrop").not(".modal-stack").css("z-index", e - 1).addClass("modal-stack")
    }
    ), 0)
}
)),
function(e) {
    "use strict";
    (_wg = {
        numAnsweredCoregs: 0,
        global_bind_functions: {
            view_external: function(t) {
                t.preventDefault();
                var o = e(this)
                  , n = o.data("scroll")
                  , i = o.attr("href")
                  , a = o.data("iframe");
                return e("#f_modal").length > 0 && e("#f_modal").modal("hide"),
                _wg.new_modal({
                    title: o.data("title") || o.html(),
                    message: !a && '<div class="modal-content-loading"><div class="loading">    <div class="showbox">        <div class="loader">            <svg class="circular" viewBox="25 25 50 50">                <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>\n            </svg>        </div>    </div></div></div>',
                    closeButton: !0,
                    scrollable: !0,
                    iFrameSrc: !!a && i + "&iframe=1",
                    classes: a ? "modal-dialog-centered modal-iframe-view-external modal-lg" : "",
                    vCenter: !0,
                    size: o.data("size")
                }, (function() {
                    e("#f_modal").modal("show"),
                    a || e("#f_modal .modal-body").load(i, {
                        triggerPOST: !0
                    }, (function(t, o, a) {
                        "error" == o ? e("#f_modal .modal-body").html('Error loading the file.<br />Please use <a target="_blank" href="' + i + '">this link</a> to open in a new tab.') : void 0 !== n && "" !== n && e("#" + n).length > 0 && e("#f_modal .modal-body").animate({
                            scrollTop: e("#" + n).offset().top - 185 + "px"
                        }, 1e3, "swing")
                    }
                    ))
                }
                )),
                !1
            }
        },
        global_bind: function() {
            _wg_options.showCookieBanner && e((function() {
                var t = e(".cookie-banner");
                t.show(),
                t.find("[data-dismiss]").one("click", (function() {
                    t.slideUp()
                }
                ))
            }
            )),
            _wg_options.useTooltips && e((function() {
                e('[data-toggle="tooltip"]').tooltip()
            }
            )),
            e("body").on("click", ".corner_info .close", (function(t) {
                return t.preventDefault(),
                e(".corner_info").animate({
                    bottom: "-1000px"
                }, 1e3),
                !1
            }
            )),
            e(".view-pdf").on("click", (function(t) {
                t.preventDefault();
                var o = e(this).attr("href")
                  , n = '<object type="application/pdf" data="' + o + '" width="100%" height="500">No Support<br />Please use <a target="_blank" href="' + o + '">this link</a> to view the file.</object>';
                return _wg.new_modal({
                    title: e(this).html(),
                    message: n,
                    closeButton: !0,
                    scrollable: !1
                }, (function() {
                    e("#f_modal").modal("show")
                }
                )),
                !1
            }
            )),
            e("body").on("click", ".view-external", (function(e) {
                _wg.global_bind_functions.view_external.call(this, e)
            }
            )),
            e(".modal-inline").each((function() {
                var t = e(this)
                  , o = t.closest(".legal-hover").length ? "mouseover" : "click";
                t.on(o, (function(t) {
                    return t.preventDefault(),
                    _wg.new_modal({
                        title: e(this).html(),
                        message: e("#" + e(this).data("modal")).html(),
                        vCenter: !0,
                        closeButton: !0,
                        scrollable: !1
                    }, (function() {
                        e("#f_modal").modal("show")
                    }
                    )),
                    !1
                }
                ))
            }
            )),
            e(".placeholder").on("change", (function() {
                e(this).removeClass("placeholder")
            }
            )),
            e("[data-autoclick][data-autoclick='1']").click(),
            e("select").parent().addClass("select"),
            e("img").on("error", (function() {
                var t = e(this);
                if (t.attr("src", "/not-found.png?request=" + t.attr("src")),
                t.closest("form").hasClass("panel-coreg")) {
                    var o = t.closest(".row");
                    o.find(".col-img").removeClass("col-lg-3 col-md-2 col-sm-4").addClass("collapse"),
                    o.find(".col-cnt").removeClass("col-lg-9 col-md-10 col-sm-8").addClass("col-10 col-md-offset-1")
                }
            }
            )),
            window._wg_coreg_ids && Array.isArray(_wg_coreg_ids) && e.each(_wg_coreg_ids, (function() {
                _wg.evt("coreg", "show", this)
            }
            ))
        },
        form_bind: function() {
            var t = e("form");
            t.submit((function(e) {
                if ("continue" !== t.data("next"))
                    return e.preventDefault(),
                    !1
            }
            )),
            e(".modal-terms-checkbox .btn, .modal-terms-close-text a").on("click", (function(t) {
                e(this).is("[data-check-terms]") && e('input[type="checkbox"][name*="terms"]').prop("checked", !0),
                _wg_options.termsCheckboxSubmitFunction()
            }
            )),
            e(".dob-chk").on("change", (function() {
                e(".dob").slideDown("fast")
            }
            )),
            e(".b_submit").on("click", (function() {
                e(".dob").slideDown("fast")
            }
            )),
            e(".dob-chk").closest(".form-group").prev(".form-group").find("input").on("change", (function() {
                e(".dob").slideDown("fast")
            }
            )),
            e(".terms_chk").on("change", (function() {
                e('[name="' + e(this).attr("name") + '"]').prop("checked", e(this).is(":checked"))
            }
            )),
            e(".btn-spon").on("click", (function() {
                e('input[name="b_submit_no_spon"]').val("0")
            }
            )),
            e(".b_submit.precheck").on("click", (function(t) {
                return t.preventDefault(),
                _wg.toggle_mk_terms("enabled", e(this)),
                _wg.form_submit("precheck", e(this), !0),
                !1
            }
            )),
            e(".b_submit").not(".precheck").on("click", (function(t) {
                return t.preventDefault(),
                _wg.toggle_mk_terms("enabled", e(this)),
                _wg.form_submit("not_precheck", e(this), !0),
                !1
            }
            )),
            e('.no_spon a[data-link="no_spon"]').on("click", (function(t) {
                return t.preventDefault(),
                _wg.form_submit("no_spon", e(this), !0),
                !1
            }
            )),
            e('.no_spon_all a[data-link="no_spon"]').on("click", (function(t) {
                return t.preventDefault(),
                _wg.toggle_mk_terms("disabled", e(this)),
                _wg.form_submit("no_spon", e(this), !0),
                !1
            }
            )),
            e("body").on("change", "input[data-name-for-final-post]", (function(t) {
                const o = e(this)
                  , n = o.val()
                  , i = o.data("name-for-final-post")
                  , a = e('<input type="hidden"/>');
                a.val(n),
                a.prop("name", i),
                "checkbox" !== o.prop("type") || o.is(":checked") ? e('form[data-next="post"]').append(a) : e('form[data-next="post"]').find('input[name="' + i + '"]').remove()
            }
            ));
            const o = function(e) {
                var t = this;
                let o, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 300;
                return function() {
                    for (var i = arguments.length, a = new Array(i), s = 0; s < i; s++)
                        a[s] = arguments[s];
                    clearTimeout(o),
                    o = setTimeout((()=>{
                        e.apply(t, a)
                    }
                    ), n)
                }
            }((async t=>{
                const o = t.siblings(".input-suggestion");
                if (o.removeClass("suggest"),
                t.val().indexOf("@") >= 0) {
                    var n = e('[name="f_email"]').first().closest("form");
                    const t = new FormData(n[0]);
                    t.append("form", n.data("form")),
                    t.append("live", "true");
                    const i = await (await fetch("/inc/chckml.php", {
                        method: "POST",
                        body: new URLSearchParams(t),
                        headers: {
                            "X-Requested-With": "XMLHttpRequest"
                        }
                    })).json();
                    "suggested" === i.result && o.addClass("suggest").find("span").text(i.suggest)
                }
            }
            ), 500);
            if (e('[name="f_email"]').on("input", (function(t) {
                o(e(this))
            }
            )).on("focus", (function() {
                e(this).siblings(".input-suggestion").addClass("focussed")
            }
            )).on("blur", (function() {
                e(this).siblings(".input-suggestion").removeClass("focussed")
            }
            )).siblings(".input-suggestion").on("click", (function() {
                var t = e(this);
                t.siblings("input").val(t.find("span").text()),
                t.removeClass("suggest").find("span").text("")
            }
            )),
            t.on("mousedown", "[list]", (function() {
                e(this).blur()
            }
            )),
            t.on("focus", "[list]", (function() {
                var t = e(this);
                t.val(""),
                t.trigger(e.Event("keyup", {
                    keycode: 40
                }))
            }
            )),
            t.on("change", "[list]", (function() {
                var e, t = this.list, o = !1;
                for (e = 0; e < t.options.length; e++)
                    t.options[e].value === this.value && (o = !0);
                o || (this.value = t.options[1].value)
            }
            )),
            _wg_options.optinPopup) {
                const o = t.find('input[id^="f_terms_mk_optin_popup_"]')
                  , s = t.find("[name^=f_terms_mk_list]")
                  , r = {}
                  , l = e("#optinmodal")
                  , c = e("form.login").is(":visible");
                o.siblings("label").each((function() {
                    const t = e(this)
                      , o = t.attr("for").split("_").pop();
                    t.find('a[data-target="#sponsors"]').each((function() {
                        e(this).attr("href", "#" + o)
                    }
                    ))
                }
                )),
                e("body").on("show.bs.modal", "#sponsors", (function(t) {
                    var o = t.relatedTarget.attributes.href.nodeValue;
                    if (void 0 !== o) {
                        e('#sponsors [href="#nav-' + o.substr(1) + '"]').tab("show")
                    }
                }
                ));
                const d = ()=>l.modal({
                    backdrop: "static",
                    keyboard: !1
                });
                function n(e, t) {
                    console.log("Set counter for ", e[0], "to", t),
                    e.siblings("label").attr("data-subselected", t)
                }
                function i(t, i) {
                    "automated" !== i && setTimeout((function() {
                        o.each((function() {
                            const t = e(this)
                              , o = t.attr("id").split("_").pop()
                              , i = r[o].filter((function(e) {
                                return "on" === e.val()
                            }
                            )).length
                              , a = r[o].length === i;
                            t.prop("checked", !!i),
                            i && n(t, a || !i ? "" : i)
                        }
                        ))
                    }
                    ), 10)
                }
                function a(e, t) {
                    r[e].forEach((function(e) {
                        !function(e, t) {
                            t !== ("on" === e.val()) && e.trigger("click", "automated")
                        }(e, t)
                    }
                    ))
                }
                c ? d() : (e("form.login").one("show", d),
                e('[class*="btn-prelander"]').one("click", d)),
                l.find(".optinmodal-select-all").on("click", (function() {
                    o.prop("checked", !0),
                    Object.keys(r).forEach((function(e) {
                        a(e, !0)
                    }
                    ))
                }
                )),
                l.find(".optinmodal-select-some").on("click", (function() {
                    o.is(":checked") ? l.modal("hide") : l.find(".optinmodal-group2").collapse("toggle")
                }
                )),
                s.each((function() {
                    const t = e(this)
                      , o = t.attr("name").match(/f_terms_mk_list\[(\w+)\]/);
                    if (o) {
                        const e = o[1]
                          , n = t.parent();
                        r[e] || (r[e] = []),
                        r[e].push(t),
                        n.on("click", i)
                    }
                }
                )),
                o.each((function() {
                    e(this).on("change", (function() {
                        const t = e(this);
                        a(t.attr("id").split("_").pop(), t.is(":checked")),
                        n(t, "")
                    }
                    ))
                }
                ))
            }
        },
        pc2add: function(t) {
            const o = e("body");
            e("#f_postcode").data("curr", t),
            e.post("/inc/getPos.php", {
                h_pt: o.data("portal"),
                h_lg: o.data("lang"),
                h_tkn: e('[name="h_tkn"]').val(),
                pc: t
            }, (function(t) {
                let o, n = 0;
                t && !Array.isArray(t) && e.each(t, (function(t, i) {
                    o = e('[name="' + t + '"]'),
                    o.length && (n++,
                    "f_postcode" === t ? o.val(i[0]) : o.is("input") && (o.prop({
                        readonly: i.length <= 1,
                        disabled: 0 === i.length
                    }),
                    i.length > 1 ? o.val("").searchableSelect(i, _wg_options.autoFillStreetAllowAnything) : (o.searchableSelect("destroy"),
                    o.val(i.length ? i[0] : ""),
                    i.length && i[0].length ? o.closest(".validated").addClass("validated-ok").removeClass("validated-error") : o.closest(".validated").removeClass("validated-ok").removeClass("validated-error"))))
                }
                )),
                n || (o = e(".hidden-by-pc2add"),
                o.val("").show().siblings("select").remove(),
                o.closest(".validated").removeClass("validated-ok").addClass("validated-error"))
            }
            ))
        },
        toggle_mk_terms: function(t, o) {
            var n = o.closest("form").find(".terms_chk:visible");
            switch (t) {
            case "enabled":
                n.prop({
                    required: !0,
                    disabled: !1
                }),
                n.closest(".form-group").removeClass("no_spon transition").addClass("has-error"),
                e(".submit_no_spon_message").slideUp(),
                e('input[name="b_submit_no_spon"]').val("0");
                break;
            case "disabled":
                n.prop({
                    required: !1,
                    checked: !1,
                    disabled: !0
                }),
                n.closest(".form-group").removeClass("has-error").addClass("no_spon transition"),
                e(".submit_no_spon_message").slideDown(),
                e('input[name="b_submit_no_spon"]').val("1")
            }
        },
        form_submit: function(t, o, n) {
            var i = o;
            if (n)
                "object" == typeof grCallback ? grCallback.fn = function() {
                    _wg.form_submit(t, o, !1)
                }
                : _wg.form_submit(t, o, !1);
            else {
                var a = o.closest("form")
                  , s = function() {
                    a.validate().form() ? setTimeout((function() {
                        a.submit()
                    }
                    ), 500) : i.button("reset").prop("disabled", !1)
                };
                switch (t) {
                case "precheck":
                    var r = a.find("#f_email");
                    r.closest(".form-group"),
                    r.parent("div");
                    r.val(r.val().replace(/\s/g, "")),
                    i.hasClass("precheck") && /(.+)@(.+)/.test(r.val()) && (e(".terms_conditions").is(":checked") || e('[name="f_terms_mk_global"]').is(":checked")) ? (i.button("loading").prop("disabled", !0),
                    e.post("/inc/chckml.php", a.serialize() + "&form=" + a.data("form"), (function(e) {
                        if (i.hasClass("precheck"))
                            if (e && e.result)
                                switch (e.email && r.val(e.email),
                                e.result) {
                                case "banners":
                                    window.location.pathname = e.path;
                                    break;
                                case "continue":
                                default:
                                    i.removeClass("precheck"),
                                    s()
                                }
                            else
                                i.removeClass("precheck"),
                                s()
                    }
                    ))) : s();
                    break;
                case "not_precheck":
                    s();
                    break;
                case "no_spon":
                    e('input[name="b_submit_no_spon"]').val("1"),
                    s()
                }
            }
        },
        tabunder: function() {
            if ("thankyou" === _wg_options.nextStep) {
                const e = /((iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)|(fbid|fban|fbios|fblc|fbop|fb_iab|messenger|fb4a|fbbv|fbav|line))/i.test(navigator.userAgent)
                  , t = _wg_options.coregTabunder || _wg_translations.tabunder_url
                  , o = "tabunder_url" === t || "0" === t || e ? "" : t;
                if (o)
                    return setTimeout((function() {
                        window.location = o,
                        _wg.evt("tabunder", o)
                    }
                    ), 1e3),
                    !0
            }
            return !1
        },
        coreg_form: function() {
            const t = t=>({
                portal: e("body").data("portal"),
                corid: t.attr("id"),
                refid: t.attr("rid"),
                user: t.data("ppk"),
                cid: t.data("pci"),
                sid: t.data("psi"),
                ssid: t.data("pssi"),
                prid: t.data("prid"),
                grid: t.data("grid"),
                type: t.data("ct"),
                lnkt: !1,
                form: t.find("select,textarea,input").serialize()
            });
            e(".progress-bar").each((function() {
                void 0 !== e(this).data("newwidth") && e(this).css("width", e(this).data("newwidth"))
            }
            )),
            e(".panel-body.lnkt:not(.lnkt-multiple)").on("click", (function() {
                e(this).find('[data-qualifying="1"]').click()
            }
            )),
            e(".btn-submit.coreg-toggle, .modal.min-coregs .btn[data-continue]").on("click", (function(o) {
                o.preventDefault(),
                o.stopPropagation();
                var n = e(".btn-submit.coreg-toggle")
                  , i = e(this)
                  , a = 0
                  , s = !0
                  , r = 0
                  , l = !1
                  , c = i.data("minCount");
                "1" === i.attr("data-required") && (add_coreg_tooltip = !0,
                e(".tooltip").remove(),
                e(".panel-coreg").each((function() {
                    _wg.validate.require(e(this)) && (a++,
                    s = !1,
                    l = !0)
                }
                ))),
                "1" === i.attr("data-prchck") && e('[data-qualifying="1"]').each((function(t, o) {
                    var n = e(o);
                    n.closest(".panel-coreg").is(":visible") && (n.is(":selected") || n.is(":checked")) && (r = 2e3,
                    _wg.evt("coreg", "preLead", n.closest(".panel-coreg").attr("id")),
                    n.trigger("change"))
                }
                )),
                c && !i.data("continue") && _wg.numAnsweredCoregs < c && (e(".modal.min-coregs").modal("show"),
                s = !1);
                const d = ()=>{
                    e(".btn-submit").button("loading"),
                    setTimeout((function() {
                        var t, o = _wg.tabunder();
                        if (void 0 === (t = n.attr("data-location"))) {
                            var i = e("form.coreg-toggle");
                            o && i.attr("target", "_blank"),
                            i.submit()
                        } else
                            o ? window.open(t, "_blank") : window.location = t
                    }
                    ), r)
                }
                ;
                if (s) {
                    const o = e(".multi-checkbox").closest(".panel-coreg");
                    let n = o.length;
                    n ? o.each((function() {
                        e.post("/inc/coreg.php", t(e(this)), (()=>{
                            n--,
                            n || d()
                        }
                        ))
                    }
                    )) : d()
                } else
                    l && (n.append('<div class="btn-alert alert alert-danger animated pulse" style="font-size:.7em;white-space:initial;text-transform:none;margin-bottom:0"><i class="glyphicon glyphicon-warning-sign"></i> ' + a + " " + i.attr("data-required-msg") + ".</div>"),
                    e(".btn-alert").delay(2e3).slideUp("slow", (function() {
                        e(this).remove()
                    }
                    )))
            }
            )),
            e(".panel-coreg.cor_module .field").on("change", (function(o) {
                var n = e(this);
                o.preventDefault(),
                o.stopPropagation(),
                "" === n.val() ? n.closest(".form-group").addClass("is-empty") : n.closest(".form-group").removeClass("is-empty");
                var i = n.closest(".panel-coreg")
                  , a = i.hasClass("cor_linkout")
                  , s = i.hasClass("cor_script")
                  , r = t(i);
                if (r.lnkt = !!a && (n.closest("[data-linkout-url]").data("linkoutUrl") || n.val()),
                ("-1" == e("option:selected", this).data("qualifying") || n.is(":checked") && "-1" == n.data("qualifying")) && (r.qlfng = "-1",
                i.addClass("processing"),
                e.post("/inc/coreg.php", r, (function(e) {
                    "ok" == e.result ? _wg.hide_panel(i, "-") : i.removeClass("processing")
                }
                ))),
                1 == e("option:selected", this).data("qualifying") || n.is(":checked") && 1 == n.data("qualifying")) {
                    if (_wg.validate.require(i))
                        return (n.is("input:radio") || n.is("input:checkbox")) && n.prop("checked", !1),
                        n.is("select") && n.val((function() {
                            return e(this).find("option").filter((function() {
                                return e(this).prop("defaultSelected")
                            }
                            )).val()
                        }
                        )),
                        !1;
                    i.addClass("processing"),
                    e.post("/inc/coreg.php", r, (function(t) {
                        if ("ok" == t.result ? ("function" == typeof al_result && al_result({
                            result: "ok"
                        }),
                        _wg.hide_panel(i, "+")) : (i.removeClass("processing"),
                        "function" == typeof al_result && al_result(t.response)),
                        a) {
                            const t = n.closest(".lnkt")
                              , o = !!t.find(".lnkt-window").length
                              , i = !!t.find(".lnkt-tabunder").length
                              , a = n.closest("[data-linkout-url]").data("linkoutUrl") || n.val();
                            o ? (_wg.new_window(a),
                            _wg.evt("linkout", a, "window")) : i ? window._wg_options.coregTabunderOnLeave ? _wg_options.coregTabunder = a : (setTimeout((function() {
                                window.location.href = a,
                                _wg.evt("linkout", a, "tabunder")
                            }
                            ), 500),
                            window.open(location.href, "_blank")) : _wg.new_modal({
                                iFrameSrc: a
                            }, (function() {
                                _wg.evt("linkout", a, "modal"),
                                e("#f_modal").modal("show")
                            }
                            ))
                        } else if (s) {
                            const t = "scrpt_" + i.attr("id") + "-" + i.attr("rid")
                              , o = e('noscript[id="' + t + '"]');
                            o.replaceWith(e('<script type="text/javascript" id="' + t + '">' + o.html() + "<\/script>")),
                            _wg.evt("script", t, "dom")
                        }
                    }
                    ))
                } else
                    i.find(".has-error").removeClass("has-error"),
                    i.find(".has-tooltip").removeClass("has-tooltip").tooltip("destroy");
                var l = n.closest(".form-group.clear").attr("class");
                if (/(^|\s)expand(_\d+)?/.test(l)) {
                    var c = l.match(/expand(_\d+)?/g)
                      , d = (c = c.length > 1 ? "." + c.join(",.") : "." + c[0]).replace(/expand/g, "collapse")
                      , u = (n.is("input:radio") || n.is("input:checkbox")) && n.is(":checked") && -1 !== n.data("qualifying")
                      , p = n.is("select") && -1 !== e("option:selected", n).data("qualifying")
                      , g = u || p;
                    if ("inlined" === _wg_options.coregDisplayMode) {
                        var f = n.closest(".panel-coreg").find(d);
                        _wg.setFormVisibility(f, g, null, !0)
                    } else {
                        f = n.closest(".panel-coreg").trigger(g ? "show" : "hide").find(d);
                        g ? f.slideDown() : f.slideUp()
                    }
                }
            }
            ))
        },
        hide_panel: function(t, o) {
            var n = t.attr("id");
            "inlined" === _wg_options.coregDisplayMode ? _wg.setFormVisibility(t, !1, null, !0) : setTimeout((function() {
                t.trigger("hide").removeClass("animated").hide("fast", (function() {
                    0 === e(".panel-coreg:visible").length && e(".panel-continue").show("fast", (function() {
                        e(this).animateCss("pulse")
                    }
                    ))
                }
                ))
            }
            ), 200),
            _wg.numAnsweredCoregs++,
            _wg.evt("coreg", "lead" + o, n)
        },
        new_window: function(e) {
            var t = window.open("about:blank");
            t.document.write('<meta http-equiv="refresh" content="0;url=' + e + '">'),
            t.document.close()
        },
        step: function() {
            switch (this.global_bind(),
            _wg_step) {
            case "prize":
                e(".options li").on("click", (function() {
                    var t = e(this).data("option-image")
                      , o = e(this).data("option-value");
                    e(".option-image").attr("src", t),
                    e(".option-value").val(o)
                }
                ));
            case "welcome":
                if (void 0 !== e.material && (e.material.init(),
                e.material.ripples(".rp")),
                this.form_bind(),
                this.validate.form("login"),
                1 === e("#formCountdown").length) {
                    e("#formCountdown").slideDown();
                    var t, o, n, i = e("#formCountdown > div"), a = 100, s = 120, r = a / s, l = setInterval((function() {
                        s <= 1 ? (clearInterval(l),
                        i.toggleClass("progress-bar-success progress-bar-warning").parent("div").animateCss("flash"),
                        i.find(".text-success").toggleClass("text-success text-warning")) : (s--,
                        a -= r,
                        t = ("0" + Math.floor(s / 60)).slice(-2),
                        n = s,
                        s > 60 * t && (n = s - 60 * t),
                        o = ("0" + (n - 1)).slice(-2),
                        i.css("width", a + "%").find(".time").html(t + ":" + o))
                    }
                    ), 1e3)
                }
                break;
            case "offers":
                void 0 !== e.material && (e.material.init(),
                e.material.ripples(".rp")),
                this.coreg_form();
                break;
            case "iod":
                _wg.evt("lead", "conversion", "doi", 1);
            case "thankyou":
                e(".script-container").each((function() {
                    const t = e(this)
                      , {nm: o} = t.data();
                    _wg.evt("script", "show", o),
                    t.on("click", (()=>{
                        _wg.evt("script", "click", o)
                    }
                    ))
                }
                )),
                e(".iframe-container").each((function() {
                    const t = this
                      , o = e(t)
                      , {nm: n} = o.data();
                    _wg.evt("iframe", "show", n),
                    window.addEventListener("blur", (()=>{
                        setTimeout((()=>{
                            const e = document.activeElement
                              , o = e.parentElement;
                            "IFRAME" === e.tagName && o === t && _wg.evt("iframe", "click", n)
                        }
                        ))
                    }
                    ), {
                        once: !0
                    })
                }
                )),
                e(".banner").each((function() {
                    const t = e(this)
                      , {id: o, type: n, ppk: i} = t.data()
                      , {portal: a, step: s} = e("body").data();
                    _wg.evt("banner", "show", o),
                    t.on("click", (function() {
                        _wg.evt("banner", "click", o),
                        i && e.post("/inc/ban.php", {
                            portal: a,
                            step: s,
                            banid: o,
                            bantype: n,
                            target: "image" == n ? t.find("a").attr("href") : "script",
                            user: i
                        }, (function(e) {}
                        ))
                    }
                    ))
                }
                ))
            }
        },
        new_modal: function(t, o) {
            var n = t.id || "f_modal"
              , i = '<div class="modal fade" id="' + n + '">';
            i += '<div class="modal-dialog' + (t.classes ? " " + t.classes : ("small" === t.size ? "" : " modal-xl modal-lg") + (t.vCenter ? " modal-dialog-centered" : "") + (t.iFrameSrc ? " modal-iframe" : "")) + '">',
            i += '<div class="modal-content">',
            !t.iFrameSrc || t.title ? (i += '<div class="modal-header">',
            t.title && t.title.length > 0 && (i += '<h4 class="modal-title">' + t.title + "</h4>"),
            !0 === t.closeButton && (i += '<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>'),
            i += "</div>") : i += '<div data-dismiss="modal" class="modal-close-on-corner" aria-hidden="true">×</div>',
            i += '<div class="modal-body ' + (!0 === t.scrollable ? "modal-body-scrollable" : "") + '">',
            t.message ? i += t.message : t.iFrameSrc && (i += '<iframe src="' + t.iFrameSrc + '"></iframe>'),
            i += "</div>",
            t.iFrameSrc && !t.closeButton || (i += '<div class="modal-footer">',
            !0 === t.closeButton ? (i += '<button type="button"',
            i += ' class="btn btn-primary btn-sm btn-dark',
            i += t.closeButtonClass ? t.closeButtonClass : "",
            i += '"',
            i += ' data-dismiss="modal">',
            i += t.closeButtonText ? t.closeButtonText : _wg_translations.button_close,
            i += "</button>") : t.footer && (i += t.footer),
            i += "</div>"),
            i += "</div>",
            i += "</div>",
            i += "</div>",
            e("body").prepend(i),
            e("body").on("hidden.bs.modal", "#" + n, (function() {
                e(this).remove()
            }
            )),
            "function" == typeof o && o()
        },
        smv2: function(t) {
            return e(".smv2").each((function() {
                var o = e(this)
                  , n = o.data("cat")
                  , i = e("." + o.data("relatedtarget") + ":visible");
                i.length > 0 && i.is(":checked") && e(".smv2.cat-" + n + " .smv2-field").each((function() {
                    var o = e(this)
                      , n = o.attr("name")
                      , i = o.is(":checked") ? "on" : "off"
                      , a = e("<input>").attr("type", "hidden").attr("name", n).val(i);
                    e(t).append(e(a))
                }
                ))
            }
            )),
            t
        },
        setFormVisibility: function(t, o, n) {
            let i = arguments.length > 3 && void 0 !== arguments[3] && arguments[3]
              , a = arguments.length > 4 && void 0 !== arguments[4] && arguments[4];
            const s = o ? "form-animate-in" : "form-animate-out"
              , r = o ? "show" : "hide";
            let l = 0;
            o || (_wg._previousFormHeight = t.height(),
            t.find('[name="previous_form_height"]').val(_wg._previousFormHeight)),
            o && (t.show(),
            l = t.height(),
            _wg._previousFormHeight && (t.one("transitionend", (function() {
                e(this).css("height", "")
            }
            )),
            t.css("height", _wg._previousFormHeight))),
            i || t.trigger(r),
            console.log("Args:", arguments),
            t.on("animationend", (e=>{
                "form-animation-in" === e.originalEvent.animationName && (t.off("animationend"),
                o ? t.removeClass(s) : a ? console.log("Stayed.") : (t.removeClass(s),
                t.hide()),
                i && t.trigger(r),
                n && n())
            }
            )).addClass(s),
            o && setTimeout((()=>t.css("height", l)), 10)
        },
        validate: {
            termsModal: function(t, o) {
                if (_wg_options.useTermsCheckbox) {
                    var n = e('input[type="checkbox"][name*="terms"]:visible')
                      , i = n.filter(":checked");
                    if (e(".modal-terms-checkbox").length > 0) {
                        if (i.length < n.length)
                            return e(".modal-terms-checkbox").modal("show"),
                            _wg_options.termsCheckboxSubmitFunction = _wg.validate.submitHandler.bind(null, t, o),
                            !1
                    } else
                        n.each((function(t) {
                            e(t).removeAttr("required")
                        }
                        ))
                }
                return !0
            },
            submitHandler: function(t, o) {
                var n = e(t)
                  , i = n.data("next")
                  , a = (e("body").data("portal"),
                e("form." + i).data("next"),
                o.charAt(0).toUpperCase() + o.slice(1))
                  , s = !0
                  , r = !0
                  , l = _wg.smv2(t);
                "undefined" != typeof NProgress && NProgress.start(),
                e("form:visible .btn-submit, form:visible .b_submit").button("loading"),
                n.find(".hidden-by-pc2add").prop("disabled", !1);
                var c = function() {
                    _wg.tabunder() && n.attr("target", "_blank"),
                    n.find('[name*="pcoreg_radio"]').remove(),
                    l.submit()
                };
                _wg.evt("form", "send", o),
                "login" == o && "post" == i || "post" !== i ? n.data("userChecked") || (n.data("userChecked", "1"),
                e.post("/inc/checkUser.php", e(l).serialize() + "&form=" + o, (function(t) {
                    setTimeout((function() {
                        "undefined" != typeof NProgress && NProgress.done(),
                        _wg.lead_log_id = t && t.lid ? t.lid : "x",
                        "login" == t.result ? (_wg.evt("form", a, o + "_existent"),
                        r = !1,
                        "function" == typeof iniGoogleRecaptcha ? (e('form input[name="h_pk"]').val(t.user),
                        e('form input[name="f_email"]').attr("readonly", !0),
                        iniGoogleRecaptcha((function() {
                            window.location.pathname = t.path
                        }
                        ))) : window.location.pathname = t.path) : "fail" == t.result ? "null" !== t.path ? (s = !1,
                        r = !1,
                        window.location.pathname = t.path) : (_wg.evt("form", a, o + "_new"),
                        e('form input[name="h_pk"]').val(t.user),
                        e('form input[name="f_email"]').attr("readonly", !0),
                        "function" == typeof iniGoogleRecaptcha && iniGoogleRecaptcha(),
                        "post" === i ? (_wg.evt("lead", "conversion", "soi", 1),
                        r = !1,
                        c(),
                        "undefined" != typeof NProgress && NProgress.done()) : (ga("set", "userId", t.user),
                        gtag("set", {
                            user_id: "data.user"
                        }),
                        "1" !== e("body").data("hr") && (e("body").data("hr", "1"),
                        _wg.evt("lead", "conversion", "hr", 1)))) : "done" == t.result || (s = !1,
                        _wg.evt("form", a, o + "_error"),
                        alert("Error, please try again."))
                    }
                    ), 0),
                    setTimeout((function() {
                        r && (s ? _wg.setFormVisibility(e("form." + o), !1, (function() {
                            if (document.location.pathname.match(/\/welcome(\_\d+)?\//i)) {
                                _wg.formCounter++;
                                var t = "welcome_" + _wg.formCounter
                                  , o = document.location.pathname.replace(/\/welcome(\_\d+)?\//i, "/" + t + "/");
                                ga("send", "pageview", o),
                                gtag("set", {
                                    content_group: t,
                                    content_group4: t
                                }),
                                gtag("event", "page_view", {
                                    page_path: o,
                                    content_group: t,
                                    content_group4: t
                                }),
                                _wg.uniquePageview(o, t, "s.j")
                            }
                            _wg.setFormVisibility(e("form." + i), !0)
                        }
                        )) : (e(".b_submit").button("reset"),
                        e(".btn-submit").button("reset"))),
                        s && _wg.validate.form(i)
                    }
                    ), 0)
                }
                ))) : (e(".p-coreg input").each((function() {
                    e(this).is(":checked") && _wg.evt("coreg_premium", "lead+", e(this).data("pid"))
                }
                )),
                "inlined" === _wg_options.coregDisplayMode ? _wg.setFormVisibility(n, !1, c, !0, !0) : c(),
                "undefined" != typeof NProgress && NProgress.done())
            },
            form: function(t) {
                var o = e("form." + t);
                if (_wg.evt("form", "show", t),
                "post" == o.data("next")) {
                    e(".sponsors_logo").length > 0 && e(".sponsors_logo").hide("slow");
                    var n = {
                        h_pt: e("body").data("portal"),
                        h_pk: e('[name="h_pk"]').val(),
                        h_pid: e('[name="h_pid"]').val(),
                        h_tkn: e('[name="h_tkn"]').val()
                    };
                    e(".sponsors_logo").length > 0 && e.post("/inc/getSpon.php", n, (function(t) {
                        e(".sponsors_logo").html(t[0]).show("slow")
                    }
                    ));
                    const t = e(".p-coreg");
                    t.length && (t.is(":empty") || t.hide("slow"),
                    e.post("/inc/getCoreg.php", n, (function(e) {
                        if (t.html(e.pcoreg).show("slow"),
                        e.events)
                            for (var o in e.events)
                                _wg.evt("coreg_premium", "show", e.events[o])
                    }
                    )))
                }
                o.validate({
                    invalidHandler: function(e, t) {
                        t.numberOfInvalids() && _wg.grecaptcha("reset")
                    },
                    submitHandler: function(e) {
                        _wg.validate.termsModal(e, t) && _wg.validate.submitHandler(e, t)
                    }
                })
            },
            input_type: function(e, t) {
                var o = document.createElement("input");
                return o.setAttribute("type", e),
                o.setAttribute("value", t),
                o.value !== t
            },
            input_type_fallback: function(t) {
                console.group('Input type "' + t + '" not supported by browser');
                e(".field-" + t).length;
                console.groupEnd()
            },
            require: function(t) {
                var o = e(t).find("[required]:visible")
                  , n = 0;
                return o.length > 0 && e.each(o, (function(o, i) {
                    var a = 0;
                    if (e(t).find('[data-qualifying="-1"]').each((function() {
                        (e(this).is(":checked") || e(this).is(":selected")) && a++
                    }
                    )),
                    a)
                        return !0;
                    var s, r, l = e(this), c = l.closest(".form-group");
                    (c.hasClass("is-empty") || l.is("select") && ("" === l.val() || void 0 === l.val()) || (l.is("input:radio") || l.is("input:checkbox")) && void 0 === c.find('[name="' + l.prop("name") + '"]:checked').val() || l.is("input") && (l.is('[type="text"]') || l.is('[type="date"]') || l.is('[type="number"]')) && "" === l.val()) && (c.addClass("has-error").animateCss("pulse"),
                    s = "bottom",
                    l.is("select") ? r = "label_select" : l.is("input") && (r = "label_input"),
                    !0 === add_coreg_tooltip && l.closest(".form-group").addClass("error-line").find(".field").first().addClass("has-tooltip").tooltip({
                        animation: !1,
                        html: !0,
                        placement: s,
                        title: "<i class='glyphicon glyphicon-warning-sign'></i> Required!",
                        trigger: "manual",
                        template: '<div class="tooltip animated pulse ' + r + '" role="tooltip"><div class="tooltip-arrow" style="border-' + 'bottom-color:#a94442;"></div><div class="tooltip-inner"></div></div>'
                    }).tooltip("show").animateCss("pulse"),
                    n++)
                }
                )),
                n
            }
        },
        scrollTo: function(t) {
            var o = 0;
            t && e(t).length > 0 && (o = e(t).offset().top),
            e("html, body").animate({
                scrollTop: o
            }, "fast")
        },
        init: function() {
            window.dctvtFrm ? _wg.dctvtFrm() : this.step(),
            "undefined" != typeof NProgress && (NProgress.inc(.2),
            setTimeout((function() {
                NProgress.done()
            }
            ), 1e3)),
            e(".form-animate-waiting").each((function() {
                const t = e(this);
                _wg._previousFormHeight = t.height(),
                t.css("height", ""),
                t.removeClass("form-animate-waiting"),
                _wg.setFormVisibility(t, !0)
            }
            ))
        },
        time: function(e) {
            var t = o = "n/a";
            if (window.performance) {
                var o = Math.round(performance.now());
                ga("send", "timing", "DOM", "load", o),
                gtag("event", "timing_complete", {
                    name: "load",
                    value: o,
                    event_category: "DOM"
                })
            }
            return e ? (ga("send", "timing", "Server", "load", e),
            gtag("event", "timing_complete", {
                name: "load",
                value: e,
                event_category: "Server"
            })) : e = "n/a",
            Number.isInteger(e) && Number.isInteger(o) && (t = o - e),
            {
                s: e,
                c: o,
                d: t
            }
        },
        evt: function(e, t, o) {
            window.ga = window.ga || function() {}
            ,
            window.gtag = window.gtag || function() {}
            ,
            ga("send", "event", e, t, o),
            gtag("event", t, {
                event_category: e,
                event_label: o
            })
        },
        optmzly: function(e) {
            window.optimizely = window.optimizely || [],
            window.optimizely.push(["trackEvent", e])
        },
        grecaptcha: function(e, t) {
            if ("object" == typeof grecaptcha)
                switch (e) {
                case "run":
                    break;
                case "reset":
                    try {
                        grecaptcha.reset()
                    } catch (e) {
                        console.log("'no reCAPTCHA exist client' error caught.")
                    }
                }
        },
        dctvtFrm: function() {
            e("form").find("select, input, button").addClass("disabled").prop("disabled", !0).off("click change input focus blur mousedown"),
            _wg.form_submit = function() {
                return !1
            }
            ,
            _wg.validate = function() {
                return !1
            }
            ,
            _wg.pc2add = function() {
                return !1
            }
            ,
            window.ffpcta = 0,
            ffpcta = 0
        },
        uniquePageview: function(e, t, o) {
            var n;
            if (t = t || !1,
            o = o || !1,
            !(e = e || !1) || !t || !o)
                return;
            e = [(e = e.split("/"))[0], e[1], e[2], e[3], e[4], e[5]].join("/") + "/";
            const i = "PHPSESSID_UPV";
            let a = null === (n = document.cookie.split(";").find((e=>e.includes(i + "=")))) || void 0 === n ? void 0 : n.split("=")[1];
            if (void 0 === a)
                a = [];
            else if (a = JSON.parse(a),
            -1 !== a.indexOf(e))
                return;
            a.push(e),
            a = JSON.stringify(a),
            document.cookie = i + "=" + a + "; Secure; path=/; expires=" + new Date(Date.now() + 18e5).toUTCString();
            let s = {
                page_path: e,
                page_location: location.href,
                page_referrer: document.referrer
            };
            ("string" == typeof t || t instanceof String) && (s.content_group4 = t),
            "object" == typeof t && null !== t && ("string" == typeof t.content_group && (s.content_group = t.content_group),
            "string" == typeof t.content_group1 && (s.content_group1 = t.content_group1),
            "string" == typeof t.content_group2 && (s.content_group2 = t.content_group2),
            "string" == typeof t.content_group3 && (s.content_group3 = t.content_group3),
            "string" == typeof t.content_group4 && (s.content_group4 = t.content_group4),
            "string" == typeof t.content_group5 && (s.content_group5 = t.content_group5),
            "string" == typeof t.content_group6 && (s.content_group6 = t.content_group6),
            "string" == typeof t.content_group7 && (s.content_group7 = t.content_group7)),
            gtag("event", "unique_page_view", s)
        },
        formCounter: 1
    }).init()
}(jQuery),
jQuery.fn.extend({
    animateCss: function(e) {
        $(this).addClass("animated " + e).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend", (function() {
            $(this).removeClass("animated " + e)
        }
        ))
    }
}),
function(e) {
    function t(t) {
        const i = e(this).closest(".searchable-select")
          , a = i.find("input").val().toUpperCase();
        ["ArrowDown", "ArrowUp", "Enter"].indexOf(t.key) >= 0 ? function(e, t) {
            "ArrowDown" === e.key ? t.find("ul li").hasClass("selected") ? t.find("ul li:visible").index(t.find("ul li.selected")) + 1 < t.find("ul li:visible").length && t.find("ul li.selected").removeClass("selected").nextAll().not('[style*="display: none"]').first().addClass("selected") : t.find("ul li:first-child").addClass("selected") : "ArrowUp" === e.key ? t.find("ul li:visible").index(t.find("ul li.selected")) > 0 && t.find("ul li.selected").removeClass("selected").prevAll().not('[style*="display: none"]').first().addClass("selected") : "Enter" === e.key && (o(t, !0),
            t.find("input").valid());
            n(t)
        }(t, i) : (i.find("ul li").each((function() {
            const t = e(this)
              , o = t.text();
            let n = 0;
            (n = o.toUpperCase().indexOf(a)) >= 0 ? (t.html(o.substr(0, n) + "<b>" + o.substr(n, a.length) + "</b>" + o.substr(n + a.length)),
            t.show()) : t.hide()
        }
        )).removeClass("selected"),
        setTimeout((function() {
            i.find("ul li:visible").first().addClass("selected")
        }
        ), 100))
    }
    function o(t, o) {
        const n = (t.find("ul li.selected") || t.find("ul li:first")).text()
          , i = t.find("input");
        i.val(n),
        o && function(t) {
            var o, n;
            null === (o = e("input, select, textarea").get(e("input,select,textarea").index(t) + 1)) || void 0 === o || null === (n = o.focus) || void 0 === n || n.call(o)
        }(i)
    }
    function n(e) {
        const t = e.find("ul li.selected");
        t.length && t[0].scrollIntoView({
            block: "nearest",
            inline: "start"
        })
    }
    e.fn.searchableSelect = function() {
        let i, a, s, r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, l = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        if ("destroy" === r)
            return a = e(this),
            void (a.parent().is(".searchable-select") && (a.siblings().remove(),
            a.unwrap()));
        r ? (r.sort(),
        a = e(this),
        a.parent().is(".searchable-select") ? (i = a.parent(),
        s = i.find("ul"),
        s.empty()) : (i = e('<div class="searchable-select"></div>'),
        a.wrap(i),
        a.attr({
            autocomplete: "x" + Math.random()
        }),
        i = a.parent(),
        s = e("<ul></ul>"),
        i.append(s)),
        r.forEach((function(t, o) {
            const n = e("<li>" + t + "</li>");
            o || n.addClass("selected"),
            s.append(n)
        }
        ))) : (i = e(this),
        s = i.find("ul"),
        a = i.find("input")),
        i.data("allowAnything") && (l = !0);
        const c = s.find("li");
        return a.on("keyup", t).on("focus", (function() {
            s.show(),
            c.show(),
            n(i),
            setTimeout((function() {
                a.select()
            }
            ), 25)
        }
        )).on("blur", (function() {
            l || o(i),
            setTimeout((function() {
                s.hide()
            }
            ), 300)
        }
        )),
        i.on("click", "li", (function() {
            o(i, !0)
        }
        )),
        c.hover((function() {
            c.filter(".selected").removeClass("selected"),
            e(this).addClass("selected")
        }
        )),
        this
    }
    ,
    e((function() {
        e(".searchable-select").searchableSelect()
    }
    ))
}(jQuery),
function(e) {
    e.fn.__bs4_btn = e.fn.button,
    e.fn.button = function(e) {
        return "loading" === e && this.data("loading-text") && this.data("original-text", this.html()).html(this.data("loading-text")).prop("disabled", !0),
        "reset" === e && this.data("original-text") && this.html(this.data("original-text")).prop("disabled", !1),
        this.__bs4_btn(e)
    }
}(jQuery),
function(e) {
    if (e(".formular .coregProgressSteps").length) {
        let t = parseInt(e(".coregProgress").data("totalCoregs"));
        const o = t
          , n = e(".formular form").toArray().map((e=>[e.id, !0]))
          , i = Object.fromEntries(n);
        _wg.evt("coreg", "show", n[0][0]),
        _wg.gotoNextCoreg = function(n) {
            console.log("evtOrElement is ", n);
            const a = !n.target
              , s = n.target || n
              , r = e(s).closest(".panel-coreg")
              , l = r.nextAll(".panel-coreg").eq(0)
              , c = r.attr("id")
              , d = "linkout" === r.data("ct");
            if (a)
                _wg.setFormVisibility(r, !1, (()=>{
                    _wg.setFormVisibility(l, !0)
                }
                ));
            else {
                _wg.setFormVisibility(l, !0);
                const e = l.attr("id");
                _wg.evt("coreg", "show", e)
            }
            if (e(".enricoCoregInstruction").slideUp(),
            o && c) {
                i[c] = !1,
                t = Object.values(i).reduce(((e,t)=>e + t));
                const n = 1 - t / o
                  , a = Math.floor(100 * n) + "%";
                e(".coregProgress").css({
                    "--progress": n
                }),
                e(".coregProgressPercentage").text(a),
                e(".coregProgressRemaining").text(t),
                t || (e(".enricoCoregWeiter").slideUp(),
                d || setTimeout((function() {
                    e(".coregContinueButton button").trigger("click")
                }
                ), 4e3))
            }
        }
        ,
        e(".panel-coreg").on("hide", _wg.gotoNextCoreg),
        e(".enricoCoregWeiter").on("click", (function() {
            e(".coregContinueButton button").trigger("click")
        }
        ))
    }
    e("#sponsors").on("click", ".spon_optinout", (function() {
        var t = e(this)
          , o = t.children("input");
        const n = (e,n,i,a)=>{
            t.children("span").text(t.data(e)),
            o.val(n),
            t.removeClass(i).addClass(a)
        }
        ;
        "on" === o.val() ? n("in", "off", "text-muted", "text-success") : n("out", "on", "text-success", "text-muted")
    }
    )),
    e("form.generic").on("show", (function() {
        e(this).submit()
    }
    ))
}(jQuery);
